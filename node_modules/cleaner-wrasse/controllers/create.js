///////////////////////////////////////////////
////     SET YOUR APP.JSON DETAILS        //// 
/////////////////////////////////////////////
//Not working ? try double dots on the json url..
var myModule = require('../../../app.json');
var sitename = myModule.sitename
var website = myModule.website
var description = myModule.description
var repo = myModule.repo

var wrasseModel = require('../models/wrasse.js'); 
var express =require('express');
 
///////////////////////////////////////////////
///////   CREATE AND EDIT AN ENTRY    ////////
/////////////////////////////////////////////
exports.create = function(req, res) {

//express validator required
//user login in check required
//var dataset = req.body
var dataset =JSON.parse(JSON.stringify(req.body))
console.log(dataset,'ghjfgh')

if (typeof(dataset._id) == "undefined" || dataset._id == ""){
  delete dataset._id;
  console.log(dataset, "thjks")
    var create = new wrasseModel(dataset)
    console.log("no id")
               create.save(function (err, doc) {  
                if (err) {
                  console.log('create new existing records failed')
                  
                } else{
                  console.log('Saving of this issue was successful:')
                  res.redirect(req.get('referer'));
                }
            
          }); }
else{
wrasseModel.findOneAndUpdate({ _id: req.body._id }, req.body, { new: true }, (err, doc) => {
  //res.redirect('employee/list');
  console.log('Updated');
  res.redirect('homepage');
});

   
        };
      }
            
       
    
    